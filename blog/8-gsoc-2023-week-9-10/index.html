<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="default-src 'self';font-src 'self' data:;img-src 'self' https://* data:;media-src 'self';style-src 'self';frame-src player.vimeo.com https://www.youtube-nocookie.com giscus.app;connect-src 'self' seadve.goatcounter.com/count;script-src 'self' gc.zgo.at  giscus.app 'self'" http-equiv=Content-Security-Policy><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://seadve.github.io name=base><title>
SeaDve • GSoC 2023: Rust and GTK 4 Bustle Rewrite (Week 9 & 10)</title><link href=https://seadve.github.io/img/logo-circle.png rel=icon type=image/png><link title="SeaDve - Atom Feed" href=https://seadve.github.io/atom.xml rel=alternate type=application/atom+xml><link href="https://seadve.github.io/inter_subset_en.css?h=d8cf4ad058d6c3a4015b" rel=stylesheet><link href="https://seadve.github.io/main.css?h=d245ac7cbabb8cad9608" rel=stylesheet><meta content=light name=color-scheme><meta content="
Progress Made
I am thrilled to announce that a lot of progress happened once again over the past few weeks! Starting with the most important thing, the diagram, a lot of bugs has been squashed and the rendering performance is now improved to a usable and merge-able state.
…" name=description><meta content="
Progress Made
I am thrilled to announce that a lot of progress happened once again over the past few weeks! Starting with the most important thing, the diagram, a lot of bugs has been squashed and the rendering performance is now improved to a usable and merge-able state.
…" property=og:description><meta content="GSoC 2023: Rust and GTK 4 Bustle Rewrite (Week 9 & 10)" property=og:title><meta content=article property=og:type><meta content="https://seadve.github.io/blog/8-gsoc-2023-week-9-10/card.png?h=ff9c48bba186fa5730cf" property=og:image><meta content=640 property=og:image:width><meta content=360 property=og:image:height><meta content="https://seadve.github.io/blog/8-gsoc-2023-week-9-10/card.png?h=ff9c48bba186fa5730cf" name=twitter:image><meta content=summary_large_image name=twitter:card><meta content=en_GB property=og:locale><meta content=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/ property=og:url><meta content=SeaDve property=og:site_name><script async data-goatcounter=https://seadve.goatcounter.com/count src=https://gc.zgo.at/count.js></script><meta content=ca-pub-1987107241415366 name=google-adsense-account><script src="https://seadve.github.io/search_index.en.js?h=ae4d6edc6f7ae0e7b85c" defer></script><script src="https://seadve.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><header><nav class=navbar><div class=nav-title><a class=home-title href=https://seadve.github.io>SeaDve</a></div><div class=nav-navs><ul><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/blog/>Posts </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/projects/>Projects </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/designs/>Designs </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/photographs/>Photographs </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/about/>About </a><li class=menu-icons-container><ul class=menu-icons-group><li class="js menu-icon"><div aria-label="Click or press $SHORTCUT to open search" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" id=search-button role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div></ul></ul></div></nav></header><div class=content><main><article class=h-entry><div class=social-media-card><img alt=Card src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/card.png></div><h1 class="p-name article-title">GSoC 2023: Rust and GTK 4 Bustle Rewrite (Week 9 & 10)</h1><a class="u-url u-uid" href=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/></a><ul class=meta><span class="hidden p-author h-card"> <a class=u-url href=https://seadve.github.io rel=author title=seadve>seadve</a> </span><li><time class=dt-published datetime=2023-08-19T20:29:00.001+08:00>19th Aug 2023</time><li title="625 words"><span aria-hidden=true class=separator>•</span>4 min read<li class=tag><span aria-hidden=true class=separator>•</span>Tags: <li class=tag><a class=p-category href=https://seadve.github.io/tags/gsoc-2023/>GSoC 2023</a></ul><ul class="meta last-updated"><li><time class=dt-updated datetime=2023-08-19T21:34:00.002+08:00>Updated on 19th Aug 2023</time><li><span aria-hidden=true class=separator>•</span><a class=external href=https://github.com/SeaDve/seadve.github.io/commits/main/content/blog/8-gsoc-2023-week-9-10/index.md rel=noopener target=_blank>See changes</a></ul><section class="e-content body"><h2 id=progress-made><a aria-label="Anchor link for: progress-made" class="header-anchor no-hover-padding" href=#progress-made><span aria-hidden=true class=link-icon></span></a> Progress Made</h2><p>I am thrilled to announce that a lot of progress happened once again over the past few weeks! Starting with the most important thing, the diagram, a lot of bugs has been squashed and the rendering performance is now improved to a <a href=https://gitlab.gnome.org/msandova/bustle/-/merge_requests/34 rel=noopener target=_blank>usable and merge-able state</a>.</p><span id=continue-reading></span><p><img alt=Diagram src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/diagram.gif><p>Aside from that, it now has a header that doesn't overlay on the diagram, the drawings now properly adjust to text scale factor changes, the signal arrows are now drawn, and the rows are no longer clipped into the row titles.<p>My mentor, Bilal, also worked on <a href=https://gitlab.gnome.org/msandova/bustle/-/merge_requests/45 rel=noopener target=_blank>adding tags</a>, the colored circles in the diagram, so it is easier to determine the category of a message.<p>On the general UI side, there is now a <a href=https://gitlab.gnome.org/msandova/bustle/-/merge_requests/30 rel=noopener target=_blank>proper loading page</a> that is shown while waiting for the PCAP files to show.<p><img alt="Loading Page" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/loading-page.png><p>However, that may not be as useful as we also landed a <a href=https://gitlab.gnome.org/msandova/bustle/-/commit/d3d29c4c7becb42c33e789287ce467cf0e02ae32 rel=noopener target=_blank>patch</a> that speeds up loading by up to 32 times; that's from 16 seconds on average to 500 milliseconds, when loading a 2.2 MB file.<p>There is also now a waiting page that shows before the first message arrives while recording.<p><img alt="Waiting Page" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/waiting-page.png><p>We also landed <a href=https://gitlab.gnome.org/msandova/bustle/-/merge_requests/20 rel=noopener target=_blank>statistics window</a> which shows frequencies of messages, durations of method calls, and sizes information of each message.<p><img alt="Statistics Frequencies Page" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/statistics-frequencies-page.png><p><img alt="Statistics Durations Page" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/statistics-durations-page.png><p><img alt="Statistics Sizes Page" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/statistics-sizes-page.png><p>My mentor, Bilal, also worked on adding information on the details view including the body size and signature, and the response time from method return to its call.<p><img alt="Details View" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/details-view.png><p>There is also now a way to <a href=https://gitlab.gnome.org/msandova/bustle/-/merge_requests/28 rel=noopener target=_blank>save the PCAP file as a DOT graph file</a>, which can be used to generate a graph using Graphviz to visualize interactions between bus names like the following:<p><img alt="DOT Graph" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/dot-graph.png><p>On the plumbing side, <a href=https://gitlab.gnome.org/msandova/bustle/-/commit/ba0c05b2a10a5d48f245a61176242a1f2d8175ce rel=noopener target=_blank>saving to PCAP file is now asynchronous</a>, avoiding blocking the UI. We also ported from using <code>libpcap</code> to a pure Rust library, <a href=https://gitlab.gnome.org/msandova/bustle/-/commit/a43a8f481d7dc8bd7d430eba50bfdf04a11efccb rel=noopener target=_blank>removing unsafe code and simplifying the codebase</a>. Furthermore, the timestamp computation is now <a href=https://gitlab.gnome.org/msandova/bustle/-/commit/d603ecbc151dfa341a9d500ed7cd37b7292a13c3 rel=noopener target=_blank>more accurate</a>.<p>As part of making debugging in Bustle easier, I have also submitted a <a href=https://github.com/dbus2/zbus/pull/450 rel=noopener target=_blank>patch</a> to <code>zbus</code> to simplify the printing of bus names.<p>Finally, I started prototyping services filtering. It is still a proof of concept and does not look great, but it already functions and is a good starting point for next week.<p><img alt="Services Filtering" src=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/services-filtering.png><h2 id=plans-for-the-following-weeks><a aria-label="Anchor link for: plans-for-the-following-weeks" class="header-anchor no-hover-padding" href=#plans-for-the-following-weeks><span aria-hidden=true class=link-icon></span></a> Plans for the Following Weeks</h2><p>The following weeks will be the last days of GSoC and I will be focusing on finishing up the remaining tasks. With the most difficult part of this GSoC project done, most of the tasks left, aside from services filtering, are optimizing performance and cleaning up the codebase.<p>There are also a few more things to fix such as a proper name owner changed signal handling, drawing method call arc regardless if the row is not drawable, properly killing the <code>dbus-monitor</code> process, and propagating user-facing errors.<p>I would also like to add features such as adding a button that scroll to the method call message of a method return message or vice-versa, porting to use the <a href=https://docs.gtk.org/gsk4/struct.Path.html rel=noopener target=_blank>new <code>GskPath</code> APIs</a>, and adding a way to open multiple diagrams at once via tabs and multiple windows.</p><br><p>That's all for this week. Thanks for reading!</section><nav class="full-width article-navigation"><div><a aria-describedby=left_title aria-label=Next href=https://seadve.github.io/blog/9-gsoc-2023-final-overview/><span class=arrow>←</span> Next</a><p aria-hidden=true id=left_title>GSoC 2023: Rust and GTK 4 Bustle Rewrite (Final Overview)</div><div><a aria-describedby=right_title aria-label=Prev href=https://seadve.github.io/blog/7-gsoc-2023-week-7-8/>Prev <span class=arrow>→</span></a><p aria-hidden=true id=right_title>GSoC 2023: Rust and GTK 4 Bustle Rewrite (Week 7 & 8)</div></nav><div class=comments data-category=Announcements data-category-id=DIC_kwDOFEdWU84CmO-D data-dark-theme=noborder_dark data-input-position=top data-lang=en data-lazy-loading=true data-light-theme=noborder_light data-mapping=specific data-reactions-enabled=1 data-repo=SeaDve/seadve.github.io data-repo-id=MDEwOlJlcG9zaXRvcnkzNDAyMTk0NzU data-strict=1 data-term=8-gsoc-2023-week-9-10 id=comments><script async src=https://seadve.github.io/js/giscus.min.js></script><noscript>You need JavaScript to view the comments.</noscript></div></article></main><div id=button-container><div id=toc-floating-container><input class=toggle id=toc-toggle type=checkbox><label class=overlay for=toc-toggle></label><label title="Toggle Table of Contents" class=button for=toc-toggle id=toc-button><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg></label><div class=toc-content><div class=toc-container><ul><li><a href=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/#progress-made>Progress Made</a><li><a href=https://seadve.github.io/blog/8-gsoc-2023-week-9-10/#plans-for-the-following-weeks>Plans for the Following Weeks</a></ul></div></div></div><a title="Go to the comments section" class=no-hover-padding href=#comments id=comments-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule=evenodd fill-rule=evenodd /></svg> </a><a title="Go to the top of the page" class=no-hover-padding href=# id=top-button> <svg viewbox="0 0 20 20" fill=currentColor><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg> </a></div><span class=hidden id=copy-success> Copied! </span><span class=hidden id=copy-init> Copy code to clipboard </span><script defer src=https://seadve.github.io/js/copyCodeToClipboard.min.js></script></div><footer><section><nav class="socials nav-navs"><ul><li><a class="nav-links no-hover-padding social" href=https://seadve.github.io/atom.xml rel=noopener target=_blank> <img alt=feed loading=lazy src=https://seadve.github.io/social_icons/rss.svg title=feed> </a><li class=js><a class="nav-links no-hover-padding social" data-encoded-email="ZGF2ZWNydXo0OEBnbWFpbC5jb20=" href=#><img alt=email loading=lazy src=https://seadve.github.io/social_icons/email.svg title=email> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://github.com/SeaDve/ target=_blank> <img alt=github loading=lazy src=https://seadve.github.io/social_icons/github.svg title=github> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://gitlab.gnome.org/SeaDve target=_blank> <img alt=gitlab loading=lazy src=https://seadve.github.io/social_icons/gitlab.svg title=gitlab> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://www.linkedin.com/in/dave-patrick-caberto target=_blank> <img alt=linkedin loading=lazy src=https://seadve.github.io/social_icons/linkedin.svg title=linkedin> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://www.strava.com/athletes/seadve target=_blank> <img alt=strava loading=lazy src=https://seadve.github.io/social_icons/strava.svg title=strava> </a><li><a class="nav-links no-hover-padding social" rel="noopener me" href=https://hevy.com/user/seadve target=_blank> <img alt=hevy loading=lazy src=https://seadve.github.io/social_icons/hevy.svg title=hevy> </a></ul></nav><nav class=nav-navs><small> <ul><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/donate/> Donate </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/archive/> Archive </a><li><a class="nav-links no-hover-padding" href=https://seadve.github.io/tags/> Tags </a><li><a class="nav-links no-hover-padding" href=https://seadve.goatcounter.com//> Site Statistics </a></ul> </small></nav><div class=credits><small> <p><p>Copyright © 2025 Dave Patrick Caberto. All rights reserved.</p> Powered by <a href=https://www.getzola.org rel=noopener target=_blank>Zola</a> & <a href=https://github.com/welpo/tabi rel=noopener target=_blank>tabi</a> • <a href=https://github.com/SeaDve/seadve.github.io rel=noopener target=_blank> Site source </a></small></div></section><script async src=https://seadve.github.io/js/decodeMail.min.js></script><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><h1 class=visually-hidden id=modalTitle>Search</h1><div id=modal-content><div id=searchBar><div aria-hidden=true class=search-icon><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg></div><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search… role=combobox spellcheck=false><div class="close-icon interactive-icon" title="Clear search" id=clear-search role=button tabindex=0><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div></div><div id=results-container><div id=results-info><span id=zero_results> No results</span><span id=one_results> $NUMBER result</span><span id=many_results> $NUMBER results</span><span id=two_results> $NUMBER results</span><span id=few_results> $NUMBER results</span></div><div id=results role=listbox></div></div></div></div></footer>